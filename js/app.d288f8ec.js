(function(r){function e(e){for(var a,i,s=e[0],c=e[1],u=e[2],d=0,m=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&m.push(n[i][0]),n[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(r[a]=c[a]);l&&l(e);while(m.length)m.shift()();return o.push.apply(o,u||[]),t()}function t(){for(var r,e=0;e<o.length;e++){for(var t=o[e],a=!0,s=1;s<t.length;s++){var c=t[s];0!==n[c]&&(a=!1)}a&&(o.splice(e--,1),r=i(i.s=t[0]))}return r}var a={},n={app:0},o=[];function i(e){if(a[e])return a[e].exports;var t=a[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=r,i.c=a,i.d=function(r,e,t){i.o(r,e)||Object.defineProperty(r,e,{enumerable:!0,get:t})},i.r=function(r){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},i.t=function(r,e){if(1&e&&(r=i(r)),8&e)return r;if(4&e&&"object"===typeof r&&r&&r.__esModule)return r;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:r}),2&e&&"string"!=typeof r)for(var a in r)i.d(t,a,function(e){return r[e]}.bind(null,a));return t},i.n=function(r){var e=r&&r.__esModule?function(){return r["default"]}:function(){return r};return i.d(e,"a",e),e},i.o=function(r,e){return Object.prototype.hasOwnProperty.call(r,e)},i.p="./";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var l=c;o.push([0,"chunk-vendors"]),t()})({0:function(r,e,t){r.exports=t("56d7")},1:function(r,e){},"56d7":function(r,e,t){"use strict";t.r(e);t("99af"),t("4de4"),t("e260"),t("e6cf"),t("cca6"),t("a79d");var a=t("2b0e"),n=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("v-app",[t("v-main",[t("Principal")],1)],1)},o=[],i=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("div",[t("v-tabs",{attrs:{"background-color":"cyan",dark:"","fixed-tabs":"","icons-and-text":""},model:{value:r.tab,callback:function(e){r.tab=e},expression:"tab"}},[t("v-tabs-slider",{attrs:{color:"yellow"}}),t("v-tab",[r._v(" Rojos "),t("v-icon",[r._v("mdi-bus-clock")])],1),t("v-tab",[r._v(" Horarios "),t("v-icon",[r._v("mdi-clipboard-clock")])],1),t("v-tab",[r._v(" Reportes "),t("v-icon",[r._v("mdi-file-table-box-multiple")])],1),t("v-tab",[r._v(" Unidades "),t("v-icon",[r._v("mdi-bus-clock")])],1),t("v-tab",[r._v(" Rutas "),t("v-icon",[r._v("mdi-bus")])],1),t("v-tab",[r._v(" Acerca de "),t("v-icon",[r._v("mdi-information-outline")])],1)],1),t("v-tabs-items",{model:{value:r.tab,callback:function(e){r.tab=e},expression:"tab"}},[t("v-tab-item",[t("Rojos")],1),t("v-tab-item",[t("Horarios",{ref:"horarios"})],1),t("v-tab-item",[t("Reportes",{ref:"reportes"})],1),t("v-tab-item",[t("ReportePorUnidad")],1),t("v-tab-item",[t("Rutas",{on:{actualizadas:r.actualizarRutasEnHorarios}})],1),t("v-tab-item",[t("AcercaDe")],1)],1)],1)},s=[],c=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("v-card",{attrs:{flat:""}},[t("ConfirmarEliminacionRuta",{attrs:{ruta:r.rutaSeleccionada,mostrar:r.mostrarDialogoEliminar},on:{confirmado:function(e){return r.eliminarRutaSeleccionada()},cerrar:r.cerrarDialogo}}),t("AgregarRuta",{attrs:{mostrar:r.mostrarDialogoAgregar},on:{guardada:r.onRutaGuardada,cerrar:function(e){r.mostrarDialogoAgregar=!1}}}),r.rutas.length>0?t("div",r._l(r.rutas,(function(e,a){return t("div",{key:a},[t("v-list-item",{attrs:{"two-line":""},on:{click:function(t){return r.confirmarEliminacion(e)}}},[t("v-list-item-content",[t("v-list-item-title",[r._v(r._s(e.nombre))])],1)],1),t("v-divider")],1)})),0):t("div",[t("v-alert",{staticClass:"mx-2 my-2",attrs:{dense:"",type:"info"}},[r._v(" Todavía no hay rutas. Agrega una con el botón flotante ")])],1),t("v-btn",{attrs:{color:"primary",fab:"",elevation:"2",right:"",bottom:"",fixed:""},on:{click:function(e){return r.mostrarDialogoAgregarRuta()}}},[t("v-icon",[r._v("mdi-plus")])],1),t("v-snackbar",{attrs:{top:"",timeout:"700"},model:{value:r.snackbar.mostrar,callback:function(e){r.$set(r.snackbar,"mostrar",e)},expression:"snackbar.mostrar"}},[r._v(" "+r._s(r.snackbar.texto)+" ")])],1)},u=[],l=(t("96cf"),t("1da1")),d=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:r.mostrar,callback:function(e){r.mostrar=e},expression:"mostrar"}},[t("v-card",[t("v-card-title",{staticClass:"headline"},[r._v(" Confirmación ")]),t("v-card-text",[r._v("¿Eliminar "),t("strong",[r._v(r._s(r.ruta.nombre))]),r._v("?"),t("br"),r._v(" Se van a eliminar los horarios relacionados ")]),t("v-card-actions",[t("v-spacer"),t("v-btn",{attrs:{text:""},on:{click:r.cerrar}},[r._v(" Cancelar ")]),t("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:r.confirmar}},[r._v(" Eliminar ")])],1)],1)],1)},m=[],f={props:["mostrar","ruta"],name:"ConfirmarEliminacionRuta",data:function(){return{}},methods:{cerrar:function(){this.$emit("cerrar")},confirmar:function(){this.$emit("confirmado")}}},v=f,p=t("2877"),h=t("6544"),b=t.n(h),g=t("8336"),R=t("b0af"),_=t("99d9"),x=t("169a"),w=t("2fa4"),O=Object(p["a"])(v,d,m,!1,null,"6fe8b434",null),S=O.exports;b()(O,{VBtn:g["a"],VCard:R["a"],VCardActions:_["a"],VCardText:_["b"],VCardTitle:_["c"],VDialog:x["a"],VSpacer:w["a"]});var I=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:r.mostrar,callback:function(e){r.mostrar=e},expression:"mostrar"}},[t("v-card",[t("v-card-title",{staticClass:"headline"},[r._v(" Nueva ruta ")]),t("v-form",{ref:"formulario",staticClass:"mx-2",model:{value:r.formularioValido,callback:function(e){r.formularioValido=e},expression:"formularioValido"}},[t("v-text-field",{attrs:{rules:r.reglasValidacion.nombre,label:"Nombre",required:""},model:{value:r.ruta.nombre,callback:function(e){r.$set(r.ruta,"nombre",e)},expression:"ruta.nombre"}}),t("v-text-field",{style:{backgroundColor:r.ruta.color},attrs:{label:"Color",type:"color"},model:{value:r.ruta.color,callback:function(e){r.$set(r.ruta,"color",e)},expression:"ruta.color"}})],1),t("v-card-actions",[t("v-spacer"),t("v-btn",{attrs:{text:""},on:{click:r.cerrar}},[r._v(" Cancelar ")]),t("v-btn",{attrs:{color:"green darken-1",disabled:!r.formularioValido,text:""},on:{click:r.guardar}},[r._v(" Guardar ")])],1)],1)],1)},k=[],T=(t("7db0"),t("16b2")),C=t("5d16");T["a"].plugin(C["a"]);var y=new T["a"]("rutas");y.createIndex({index:{fields:["hora"]}});var j=y,V=(t("d3b7"),t("25f0"),{sumarHorarios:function(r,e){var t=this.formatearFechaActual(),a=new Date(t+"T"+r);return new Date(a.getTime()+60*e*1e3)},restarHorarios:function(r,e){var t=this.formatearFechaActual(),a=new Date(t+"T"+r),n=new Date(t+"T"+e);return a-n},idConSufijo:function(r){return r.concat("_",this.formatearFechaYHoraParaId())},formatearFechaYHoraParaId:function(){var r=new Date,e=r.getMonth()+1,t=r.getDate(),a="".concat(r.getFullYear(),"-").concat(this.agregarCeroSiEsNecesario(e),"-").concat(this.agregarCeroSiEsNecesario(t)),n="".concat(this.agregarCeroSiEsNecesario(r.getHours()),"_").concat(this.agregarCeroSiEsNecesario(r.getMinutes()),"_").concat(this.agregarCeroSiEsNecesario(r.getSeconds()));return a+"_"+n},formatearHoraActual:function(){var r=new Date;return"".concat(this.agregarCeroSiEsNecesario(r.getHours()),":").concat(this.agregarCeroSiEsNecesario(r.getMinutes()),":").concat(this.agregarCeroSiEsNecesario(r.getSeconds()))},formatearFechaActual:function(){var r=new Date,e=r.getMonth()+1,t=r.getDate();return"".concat(r.getFullYear(),"-").concat(this.agregarCeroSiEsNecesario(e),"-").concat(this.agregarCeroSiEsNecesario(t))},agregarCeroSiEsNecesario:function(r){return r<10?"0".concat(r):r.toString()}}),A=V,E="Rojo",H="R-3",D={TIPO_ROJO:E,TIPO_COMBI:H,TIPOS_UNIDAD:[H,E],PREFIJO_RUTAS:"rutas",PREFIJO_HORARIOS:"horarios",PREFIJO_COMISIONES:"comisiones",PREFIJO_UNIDADES_BAJADA:"unidades_bajada",NUMEROS_PARA_COMISION:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,27,28,29,30,31,33,34,35,36,37,38,39,40,41,42,43,46,47]},P=D,F=(t("a434"),t("b85c")),U={obtenerPorTipoUnidad:function(r){return Object(l["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,j.find({selector:{_id:{$gte:P.PREFIJO_HORARIOS,$lte:P.PREFIJO_HORARIOS+"￰"},tipoUnidad:r,hora:{$gte:null}}});case 2:return t=e.sent,e.abrupt("return",t.docs);case 4:case"end":return e.stop()}}),e)})))()},obtenerPorTipoUnidadYNumero:function(r,e){return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,j.find({selector:{_id:{$gte:P.PREFIJO_HORARIOS,$lte:P.PREFIJO_HORARIOS+"￰"},tipoUnidad:r,numero:e,hora:{$gte:null}}});case 2:return a=t.sent,t.abrupt("return",a.docs);case 4:case"end":return t.stop()}}),t)})))()},eliminarDeRuta:function(r){return Object(l["a"])(regeneratorRuntime.mark((function e(){var t,a,n,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,j.find({selector:{_id:{$gte:P.PREFIJO_HORARIOS,$lte:P.PREFIJO_HORARIOS+"￰"},idRuta:r}});case 2:t=e.sent,a=Object(F["a"])(t.docs),e.prev=4,a.s();case 6:if((n=a.n()).done){e.next=12;break}return o=n.value,e.next=10,j.remove(o);case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](4),a.e(e.t0);case 17:return e.prev=17,a.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[4,14,17,20]])})))()},nuevo:function(r,e,t,a,n){return Object(l["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,j.put({_id:A.idConSufijo(P.PREFIJO_HORARIOS),idRuta:r,fecha:e,hora:t,tipoUnidad:a,numero:n});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}}),o)})))()},obtenerNumerosPorFechaRutaYTipoUnidad:function(r,e,t){return Object(l["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,j.find({selector:{_id:{$gte:P.PREFIJO_HORARIOS,$lte:P.PREFIJO_HORARIOS+"￰"},fecha:r,idRuta:e,tipoUnidad:t,hora:{$gte:null}}});case 2:return n=a.sent,a.abrupt("return",n.docs);case 4:case"end":return a.stop()}}),a)})))()},obtenerPorFechaEIdRuta:function(r,e){return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,j.find({selector:{_id:{$gte:P.PREFIJO_HORARIOS,$lte:P.PREFIJO_HORARIOS+"￰"},fecha:r,idRuta:e,hora:{$gte:null}},sort:[{hora:"desc"}]});case 2:return a=t.sent,t.abrupt("return",a.docs);case 4:case"end":return t.stop()}}),t)})))()},obtenerUltimoHorarioRegistrado:function(r,e){return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,j.find({selector:{_id:{$gte:P.PREFIJO_HORARIOS,$lte:P.PREFIJO_HORARIOS+"￰"},fecha:r,idRuta:e,hora:{$gt:null}},sort:[{hora:"desc"}],limit:2});case 2:if(a=t.sent,n=a.docs,!(n.length<=0)){t.next=6;break}return t.abrupt("return","");case 6:return t.abrupt("return",n.splice(0,2));case 7:case"end":return t.stop()}}),t)})))()},eliminar:function(r){return Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,j.remove(r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))()}},N=U,$={nueva:function(r,e){return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,j.put({_id:A.idConSufijo(P.PREFIJO_RUTAS),nombre:r,color:e});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},obtener:function(){return Object(l["a"])(regeneratorRuntime.mark((function r(){var e;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,j.find({selector:{_id:{$gte:P.PREFIJO_RUTAS,$lte:P.PREFIJO_RUTAS+"￰"}}});case 2:return e=r.sent,r.abrupt("return",e.docs);case 4:case"end":return r.stop()}}),r)})))()},eliminar:function(r){return Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,N.eliminarDeRuta(r._id);case 2:return e.next=4,j.remove(r);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))()}},M=$,J={name:"AgregarRuta",props:["mostrar"],data:function(){return{ruta:{nombre:"",color:"ffffff"},formularioValido:!1,reglasValidacion:{nombre:[function(r){return!!r||"Escribe el nombre"}]}}},methods:{antesDeCerrar:function(){this.$refs.formulario.resetValidation(),this.$refs.formulario.reset()},cerrar:function(){this.antesDeCerrar(),this.$emit("cerrar")},guardar:function(){var r=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,M.nueva(r.ruta.nombre,r.ruta.color);case 2:r.ruta.nombre="",r.ruta.color="ffffff",r.antesDeCerrar(),r.$emit("guardada");case 6:case"end":return e.stop()}}),e)})))()}}},z=J,L=t("4bd4"),B=t("8654"),G=Object(p["a"])(z,I,k,!1,null,null,null),Y=G.exports;b()(G,{VBtn:g["a"],VCard:R["a"],VCardActions:_["a"],VCardTitle:_["c"],VDialog:x["a"],VForm:L["a"],VSpacer:w["a"],VTextField:B["a"]});var Z={name:"Rutas",components:{AgregarRuta:Y,ConfirmarEliminacionRuta:S},data:function(){return{rutas:[],rutaSeleccionada:{},mostrarDialogoEliminar:!1,mostrarDialogoAgregar:!1,snackbar:{mostrar:!1,texto:""}}},mounted:function(){this.obtenerRutas()},methods:{onRutaGuardada:function(){this.snackbar.mostrar=!0,this.snackbar.texto="Ruta guardada",this.mostrarDialogoAgregar=!1,this.$emit("actualizadas"),this.obtenerRutas()},mostrarDialogoAgregarRuta:function(){this.mostrarDialogoAgregar=!0},confirmarEliminacion:function(r){this.rutaSeleccionada=r,this.mostrarDialogoEliminar=!0},eliminarRutaSeleccionada:function(){var r=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,M.eliminar(r.rutaSeleccionada);case 2:r.rutaSeleccionada={},r.mostrarDialogoEliminar=!1,r.$emit("actualizadas"),r.obtenerRutas();case 6:case"end":return e.stop()}}),e)})))()},cerrarDialogo:function(){this.mostrarDialogoEliminar=!1},obtenerRutas:function(){var r=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,M.obtener();case 2:r.rutas=e.sent;case 3:case"end":return e.stop()}}),e)})))()}}},q=Z,W=t("0798"),X=t("ce7e"),K=t("132d"),Q=t("da13"),rr=t("5d23"),er=t("2db4"),tr=Object(p["a"])(q,c,u,!1,null,"156af335",null),ar=tr.exports;b()(tr,{VAlert:W["a"],VBtn:g["a"],VCard:R["a"],VDivider:X["a"],VIcon:K["a"],VListItem:Q["a"],VListItemContent:rr["a"],VListItemTitle:rr["b"],VSnackbar:er["a"]});var nr=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("v-card",{attrs:{flat:""}},[t("DialogoAgregarHorario",{attrs:{ruta:r.rutaSeleccionada,mostrar:r.dialogoRegistrarHorario},on:{guardado:r.onHorarioGuardado,cerrar:function(e){r.dialogoRegistrarHorario=!1}}}),t("v-row",[t("v-col",{directives:[{name:"show",rawName:"v-show",value:r.mostrarNotas,expression:"mostrarNotas"}],staticStyle:{padding:"0"},attrs:{cols:"2"}},[r.rutasTemporales.length>0?t("div",r._l(r.rutasTemporales,(function(e,a){return t("div",{key:a,on:{click:function(t){return r.clickRutaTemporal(e)}}},[t("v-list-item",{style:{backgroundColor:e.marcada?r.colorRutaTemporal:"white"},attrs:{"two-line":""}},[t("v-list-item-content",[t("v-list-item-title",{staticStyle:{"font-size":"0.7rem"}},[t("strong",[r._v(r._s(e.nombre)),t("br"),r._v(r._s(e.sufijo))])])],1)],1),t("v-divider")],1)})),0):r._e()]),t("v-col",{attrs:{cols:r.mostrarNotas?10:12}},[r.rutas.length>0?t("div",r._l(r.rutas,(function(e,a){return t("div",{key:a},[t("v-list-item",{style:{backgroundColor:e.color},attrs:{"three-line":""},on:{click:function(t){return r.registrarHorario(e,a)}}},[t("v-list-item-content",{staticStyle:{padding:"0",margin:"0"}},[t("v-list-item-title",[t("p",{staticStyle:{"text-align":"right","margin-bottom":"10px"}},[t("v-btn",{staticStyle:{padding:"0",margin:"0","min-width":"0px",height:"16px"},attrs:{color:"error",depressed:""}},[r._v(r._s((e.informacionMicros[0]||{}).numero))]),r._v(" "+r._s((e.informacionMicros[0]||{}).hora)+" "),t("strong",[r._v(" "+r._s(r._f("milisegundosCortos")(r.diferenciaEntreMicros(e.informacionMicros)))+" ")]),t("v-btn",{staticStyle:{padding:"0",margin:"0","min-width":"0px",height:"16px"},attrs:{color:"error",depressed:""}},[r._v(r._s((e.informacionMicros[1]||{}).numero))]),t("strong",[r._v(" "+r._s(e.nombre)+" ")])],1),e.horarios?t("div",r._l(e.horarios,(function(e,a){return t("v-row",{key:a},[0===a?[t("v-col",{staticStyle:{"padding-bottom":"0 !important","padding-top":"0 !important",margin:"0 !important"},attrs:{cols:"3"}},[0===a?t("TipoTransporte",{attrs:{horario:e}}):r._e()],1),t("v-col",{staticStyle:{"padding-bottom":"0 !important","padding-top":"0 !important",margin:"0 !important","font-size":"1.2rem"},style:{backgroundColor:e.transcurrido>=r.rangoNotificacionInicio&&e.transcurrido<=r.rangoNotificacionFin&&0===a&&r.esRojo(e)?"white":"inherit"},attrs:{cols:"9"}},[r._v(" "+r._s(e.hora)+" | "),t("strong",{style:{fontSize:0===a?"1.5rem":"1.2rem"}},[r._v(r._s(r._f("milisegundosCortos")(e.transcurrido)))])])]:[t("v-col",{staticStyle:{"padding-top":"0 !important","padding-bottom":"0 !important","text-align":"right"},attrs:{cols:"12"}},[t("p",[r._v(" Se llevó "),t("strong",[r._v(r._s(r._f("milisegundosConHoras")(e.transcurrido)))]),r._v(" de "),t("span",{style:{backgroundColor:r.esRojo(e)?"red":"inherit",border:r.esRojo(e)?"1px solid white":"none"}},[r._v(r._s(e.tipoUnidad)+":"),t("strong",[r._v(r._s(e.numero))])])])])]],2)})),1):t("div",[t("p",[r._v("Sin información de horario. Toca para agregar")])])])],1)],1),t("v-divider")],1)})),0):t("div",[t("v-alert",{staticClass:"mx-2 my-2",attrs:{dense:"",type:"info"}},[r._v(" Todavía no hay rutas. Ve a "),t("strong",[r._v("Rutas")]),r._v(" y agrega algunas ")])],1)])],1),t("v-snackbar",{attrs:{top:"",timeout:"700"},model:{value:r.snackbar.mostrar,callback:function(e){r.$set(r.snackbar,"mostrar",e)},expression:"snackbar.mostrar"}},[r._v(" "+r._s(r.snackbar.texto)+" ")])],1)},or=[],ir=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("v-dialog",{attrs:{persistent:"","max-width":"350"},model:{value:r.mostrar,callback:function(e){r.mostrar=e},expression:"mostrar"}},[t("v-card",{staticClass:"pt-2"},[t("v-container",[t("v-text-field",{ref:"campoNumero",attrs:{label:"Número",type:"number"},model:{value:r.numeroUnidad,callback:function(e){r.numeroUnidad=e},expression:"numeroUnidad"}})],1),t("v-alert",{staticClass:"mx-2 my-2",attrs:{dense:"",type:"success"}},[t("strong",{staticClass:"text-h4"},[r._v(r._s(r.ruta.nombre)+" | "+r._s(r.numeroUnidad))])]),t("div",{directives:[{name:"show",rawName:"v-show",value:!r.tomarHoraActual,expression:"!tomarHoraActual"}]},[t("v-time-picker",{attrs:{"full-width":"",format:"ampm","use-seconds":""},model:{value:r.horario,callback:function(e){r.horario=e},expression:"horario"}}),t("div",{directives:[{name:"show",rawName:"v-show",value:!r.horario,expression:"!horario"}]},[t("p",[r._v("Por favor selecciona el horario")])]),t("div",{directives:[{name:"show",rawName:"v-show",value:r.horario,expression:"horario"}]},[r._v(" Se registrará con la hora: "),t("strong",[r._v(r._s(r.horario))])])],1),t("v-card-actions",[t("v-spacer"),t("v-btn",{directives:[{name:"show",rawName:"v-show",value:r.deberiaMostrarBotonMicro(),expression:"deberiaMostrarBotonMicro()"}],attrs:{dark:"",color:"red",large:""},on:{click:function(e){return r.guardarMicro()}}},[r._v(" Rojo ")]),t("v-btn",{attrs:{large:"",text:""},on:{click:r.cerrar}},[r._v(" Cancelar ")]),t("v-btn",{attrs:{color:"blue ",large:"",dark:""},on:{click:function(e){return r.guardarCombi()}}},[r._v(" R-3 ")])],1)],1)],1)},sr=[],cr=(t("c975"),{props:["mostrar","ruta"],name:"DialogoAgregarHorario",data:function(){return{horario:"",horaRefrescada:"",idInterval:null,tomarHoraActual:!0,tipos:[],tipoUnidad:"",numeroUnidad:""}},mounted:function(){var r=this;this.tipos=P.TIPOS_UNIDAD,this.tipoUnidad=this.tipos[0],this.idInterval=setInterval((function(){r.refrescarHora()}),500)},beforeDestroy:function(){console.log("Destroy!")},watch:{mostrar:function(){var r=this;this.mostrar&&setTimeout((function(){r.$refs.campoNumero.$refs.input.focus()}),50)}},methods:{deberiaMostrarBotonMicro:function(){if(!this.ruta.nombre)return!0;var r=["talzintan","tezotepec","calicapan","sosa","san isidro","tacopan"];return-1!==r.indexOf(this.ruta.nombre.toLowerCase())},guardarCombi:function(){this.tipoUnidad=P.TIPO_COMBI,this.guardar()},guardarMicro:function(){this.tipoUnidad=P.TIPO_ROJO,this.guardar()},antesDeCerrar:function(){this.tipoUnidad=this.tipos[0],this.numeroUnidad=""},refrescarHora:function(){this.horaRefrescada=A.formatearHoraActual()},cerrar:function(){this.antesDeCerrar(),this.$emit("cerrar")},guardar:function(){var r=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r.tomarHoraActual||r.horario){e.next=2;break}return e.abrupt("return");case 2:if(r.numeroUnidad){e.next=4;break}return e.abrupt("return");case 4:return t="",t=r.tomarHoraActual?A.formatearHoraActual():r.horario,e.next=8,N.nuevo(r.ruta._id,A.formatearFechaActual(),t,r.tipoUnidad,r.numeroUnidad);case 8:r.antesDeCerrar(),r.$emit("guardado");case 10:case"end":return e.stop()}}),e)})))()}}}),ur=cr,lr=t("a523"),dr=t("c964"),mr=Object(p["a"])(ur,ir,sr,!1,null,null,null),fr=mr.exports;b()(mr,{VAlert:W["a"],VBtn:g["a"],VCard:R["a"],VCardActions:_["a"],VContainer:lr["a"],VDialog:x["a"],VSpacer:w["a"],VTextField:B["a"],VTimePicker:dr["a"]});var vr=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("div",[t("v-btn",{staticClass:"white--text",staticStyle:{border:"1px solid white !important"},attrs:{color:this.esRojo()?"error":"info",depressed:""}},[r._v(" "+r._s(r.horario.numero)+" ")])],1)},pr=[],hr={name:"TipoTransporte",props:["horario"],methods:{esRojo:function(){return this.horario.tipoUnidad===P.TIPO_ROJO}}},br=hr,gr=Object(p["a"])(br,vr,pr,!1,null,"15f24d78",null),Rr=gr.exports;b()(gr,{VBtn:g["a"]});var _r="rutas_temporales",xr="#C6FF00",wr="#FF1744",Or={name:"Horarios",components:{TipoTransporte:Rr,DialogoAgregarHorario:fr},data:function(){return{colorRutaTemporal:xr,ultimoIndice:null,rangoNotificacionInicio:36e4,rangoNotificacionFin:42e4,snackbar:{texto:"",mostrar:!1},mostrarNotas:!0,dialogoRegistrarHorario:!1,rutas:[],rutasTemporales:[{nombre:"TACO",marcada:!1,sufijo:""},{nombre:"TALZ",marcada:!1,sufijo:""},{nombre:"TALB",marcada:!1,sufijo:""},{nombre:"TEZO",marcada:!1,sufijo:""},{nombre:"CALI",marcada:!1,sufijo:""},{nombre:"SOSA",marcada:!1,sufijo:""},{nombre:"SANI",marcada:!1,sufijo:""}],rutaSeleccionada:{},idInterval:null,pausado:!1,horariosRojos:[]}},mounted:function(){var r=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return localStorage.getItem(_r)||r.guardarRutasTemporales(),r.rutasTemporales=JSON.parse(localStorage.getItem(_r)),e.next=4,r.obtenerRutas();case 4:r.iniciarIntervalRefrescarTiempo();case 5:case"end":return e.stop()}}),e)})))()},methods:{diferenciaEntreMicros:function(r){if(r.length<2)return 0;var e=r[0],t=r[1],a=new Date(e.fecha+"T"+e.hora),n=new Date(t.fecha+"T"+t.hora);return a-n},guardarRutasTemporales:function(){localStorage.setItem(_r,JSON.stringify(this.rutasTemporales))},clickRutaTemporal:function(r){r.marcada=!r.marcada,r.marcada?r.sufijo=prompt("Ingresa el texto: "):r.sufijo="",this.guardarRutasTemporales()},esRojo:function(r){return r.tipoUnidad===P.TIPO_ROJO},intercambiarVista:function(){this.mostrarNotas=!this.mostrarNotas},clickBoton:function(){this.pausado?(this.iniciarIntervalRefrescarTiempo(),this.pausado=!1):(clearInterval(this.idInterval),this.pausado=!0)},iniciarIntervalRefrescarTiempo:function(){var r=this;clearInterval(this.idInterval),this.refrescarTiempoTranscurrido(),this.idInterval=setInterval((function(){r.refrescarTiempoTranscurrido()}),1e3)},refrescarTiempoTranscurrido:function(){this.colorRutaTemporal=this.colorRutaTemporal===xr?wr:xr;var r,e=A.formatearFechaActual(),t=new Date,a=Object(F["a"])(this.rutas);try{for(a.s();!(r=a.n()).done;){var n,o=r.value,i=0,s=Object(F["a"])(o.horarios);try{for(s.s();!(n=s.n()).done;){var c=n.value;if(c.mostrarNotificacion=!0,c.hora){var u=new Date(e+"T"+c.hora);if(c.transcurrido=t-u,1===i&&(c.transcurrido=new Date(e+"T"+o.horarios[0].hora)-u),0===i)if(c.transcurrido>=this.rangoNotificacionInicio&&c.transcurrido<=this.rangoNotificacionFin&&!c.notificacionMostrada&&this.esRojo(c)){var l=o.nombre,d=c.tipoUnidad,m=c.numero,f="".concat(l," ").concat(d," ").concat(m);this.$toasted.show(f,{position:"bottom-center",duration:null}),c.notificacionMostrada=!0}else c.transcurrido>this.rangoNotificacionFin&&this.esRojo(c)&&(c.notificacionMostrada=!1);i++}else o.transcurrido=""}}catch(v){s.e(v)}finally{s.f()}}}catch(v){a.e(v)}finally{a.f()}},onHorarioGuardado:function(){var r=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r.snackbar={texto:"Horario guardado",mostrar:!0},r.dialogoRegistrarHorario=!1,r.colocarHorarioARuta(r.ultimoIndice),e.next=5,r.colocarInformacionMicros();case 5:case"end":return e.stop()}}),e)})))()},registrarHorario:function(r,e){this.ultimoIndice=e,this.rutaSeleccionada=r,this.dialogoRegistrarHorario=!0},colocarHorarioARuta:function(r){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n,o,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=A.formatearFechaActual(),t.next=3,N.obtenerUltimoHorarioRegistrado(a,e.rutas[r]._id);case 3:n=t.sent,o=Object(F["a"])(n);try{for(o.s();!(i=o.n()).done;)s=i.value,s.transcurrido=0}catch(c){o.e(c)}finally{o.f()}e.rutas[r].horarios=n;case 7:case"end":return t.stop()}}),t)})))()},obtenerUltimosRojos:function(r){for(var e=[],t=0,a=this.horariosRojos.length-1;a>=0;a--){var n=this.horariosRojos[a];if(n.idRuta===r&&(e.push(n),t++),t>=2)return e}return e},colocarInformacionMicros:function(){var r=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,N.obtenerPorTipoUnidad(P.TIPO_ROJO);case 2:r.horariosRojos=e.sent,t=Object(F["a"])(r.rutas);try{for(t.s();!(a=t.n()).done;)n=a.value,n.informacionMicros=r.obtenerUltimosRojos(n._id)}catch(o){t.e(o)}finally{t.f()}case 5:case"end":return e.stop()}}),e)})))()},obtenerRutas:function(){var r=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var t,a,n,o,i,s,c,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=A.formatearFechaActual(),e.next=3,M.obtener();case 3:a=e.sent,n=Object(F["a"])(a),e.prev=5,n.s();case 7:if((o=n.n()).done){e.next=20;break}return i=o.value,e.next=11,N.obtenerUltimoHorarioRegistrado(t,i._id);case 11:s=e.sent,c=Object(F["a"])(s);try{for(c.s();!(u=c.n()).done;)l=u.value,l.transcurrido=0}catch(d){c.e(d)}finally{c.f()}i.horarios=s,i.informacionMicros=r.obtenerUltimosRojos(i._id),i.transcurrido=0,i.marcada=!1;case 18:e.next=7;break;case 20:e.next=25;break;case 22:e.prev=22,e.t0=e["catch"](5),n.e(e.t0);case 25:return e.prev=25,n.f(),e.finish(25);case 28:return r.rutas=a,e.next=31,r.colocarInformacionMicros();case 31:case"end":return e.stop()}}),e,null,[[5,22,25,28]])})))()}}},Sr=Or,Ir=t("62ad"),kr=t("0fd9"),Tr=Object(p["a"])(Sr,nr,or,!1,null,null,null),Cr=Tr.exports;b()(Tr,{VAlert:W["a"],VBtn:g["a"],VCard:R["a"],VCol:Ir["a"],VDivider:X["a"],VListItem:Q["a"],VListItemContent:rr["a"],VListItemTitle:rr["b"],VRow:kr["a"],VSnackbar:er["a"]});var yr=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("v-card",{staticStyle:{margin:"0 40px 0 40px"},style:{backgroundColor:r.colorFondo},attrs:{flat:""}},[t("v-select",{attrs:{items:r.rutas,"item-text":"nombre","item-value":"_id",label:"Ruta","no-data-text":"No has registrado ninguna ruta"},on:{change:function(e){return r.obtenerHorariosConFechaYRutaSeleccionada()}},scopedSlots:r._u([{key:"item",fn:function(e){var a=e.item;return[t("h1",{staticStyle:{"min-width":"100%",padding:"10px"},style:{backgroundColor:a.color}},[r._v(" "+r._s(a.nombre)+" ")])]}}]),model:{value:r.rutaSeleccionada,callback:function(e){r.rutaSeleccionada=e},expression:"rutaSeleccionada"}}),t("v-slider",{attrs:{min:"40",max:"70",step:"5","thumb-label":"always"},model:{value:r.minutosSuma,callback:function(e){r.minutosSuma=e},expression:"minutosSuma"}}),r.horarios.length>0?t("div",[t("v-row",{attrs:{justify:"center"}},[t("h6",{staticClass:"text-h5 mb-2"},[r._v(" Promedio R3: "+r._s(r._f("milisegundosCortos")(r.promedios.combi))+" ")])]),t("v-divider"),r._l(r.horarios,(function(e,a){return t("div",{key:a},[t("v-list-item",{attrs:{"two-line":""}},[t("v-list-item-content",[t("v-list-item-title"),t("v-row",[t("v-col",{staticStyle:{"text-align":"right"},attrs:{cols:"4"}},[t("TipoTransporte",{attrs:{horario:e}})],1),t("v-col",{staticStyle:{"font-size":"1rem"},attrs:{cols:"8"}},[t("v-icon",[r._v("mdi-clock-outline")]),r._v(" "+r._s(e.hora)+" | "),t("strong",{staticStyle:{"font-size":"1.3rem"}},[r._v(r._s(r._f("milisegundosCortos")(e.tiempoGeneral)))]),t("br"),r._v(" Predicción: "),t("strong",[r._v(r._s(r._f("formatearFecha")(r.sumarConTiempoSeleccionado(e.hora))))])],1)],1)],1)],1),t("v-divider")],1)}))],2):t("div",[t("v-alert",{attrs:{type:"info"}},[r._v(" No hay horarios para la fecha y ruta seleccionados ")])],1)],1)},jr=[],Vr={name:"Reportes",components:{TipoTransporte:Rr},data:function(){return{fechaSeleccionada:"",rutas:[],modal:!1,rutaSeleccionada:"",horarios:[],promedios:{rojo:"",combi:"",general:""},TIPO_COMBI:P.TIPO_COMBI,minutosSuma:null}},mounted:function(){var r=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.obtenerRutas();case 2:r.fechaSeleccionada=A.formatearFechaActual();case 3:case"end":return e.stop()}}),e)})))()},computed:{colorFondo:function(){var r=this,e=this.rutas.find((function(e){return e._id===r.rutaSeleccionada}));return e?e.color:"#ffffff"}},methods:{sumarConTiempoSeleccionado:function(r){return A.sumarHorarios(r,this.minutosSuma)},refrescarTodo:function(){var r=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.obtenerRutas();case 2:return r.rutas.length>0&&(r.rutaSeleccionada=r.rutas[0]._id),e.next=5,r.obtenerHorariosConFechaYRutaSeleccionada();case 5:case"end":return e.stop()}}),e)})))()},obtenerRutas:function(){var r=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,M.obtener();case 2:r.rutas=e.sent;case 3:case"end":return e.stop()}}),e)})))()},obtenerHorariosConFechaYRutaSeleccionada:function(){var r=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var t,a,n,o,i,s,c,u,l,d,m,f,v,p;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r.fechaSeleccionada&&r.rutaSeleccionada){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,N.obtenerPorFechaEIdRuta(r.fechaSeleccionada,r.rutaSeleccionada);case 4:if(t=e.sent,t.length>0){for(a="",n="",o=0,i=0,s=0,c=0,u=0,t[t.length-1].tipoUnidad===P.TIPO_ROJO?a=t[t.length-1].hora:n=t[t.length-1].hora,l=t.length-2;l>=0;l--)d=t[l].hora,m=t[l+1].hora,f=A.restarHorarios(d,m),s+=f,t[l].tiempoGeneral=f,t[l].tipoUnidad===P.TIPO_ROJO?(a&&(v=A.restarHorarios(d,a),o+=v,c++,t[l].tiempoMismoTipo=v),a=d):(n&&(p=A.restarHorarios(d,n),i+=p,u++,t[l].tiempoMismoTipo=p),n=d);r.promedios.general=s/(t.length-1),r.promedios.rojo=o/c,r.promedios.combi=i/u}r.horarios=t;case 7:case"end":return e.stop()}}),e)})))()}}},Ar=Vr,Er=t("b974"),Hr=t("ba0d"),Dr=Object(p["a"])(Ar,yr,jr,!1,null,null,null),Pr=Dr.exports;b()(Dr,{VAlert:W["a"],VCard:R["a"],VCol:Ir["a"],VDivider:X["a"],VIcon:K["a"],VListItem:Q["a"],VListItemContent:rr["a"],VListItemTitle:rr["b"],VRow:kr["a"],VSelect:Er["a"],VSlider:Hr["a"]});var Fr=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("v-card",{staticClass:"mx-1 my-1",attrs:{flat:""}},[t("v-row",[t("v-col",[t("v-select",{attrs:{items:r.unidades,label:"Tipo de unidad"},on:{change:r.obtenerReporte},model:{value:r.tipoUnidad,callback:function(e){r.tipoUnidad=e},expression:"tipoUnidad"}})],1),t("v-col",[t("v-text-field",{attrs:{label:"Número"},on:{change:r.obtenerReporte,keyup:r.obtenerReporte},model:{value:r.numeroSeleccionado,callback:function(e){r.numeroSeleccionado=e},expression:"numeroSeleccionado"}})],1)],1),r._l(r.horarios,(function(e,a){return t("div",{key:a,style:{backgroundColor:e.colorRuta}},[t("v-list-item",{attrs:{"two-line":""}},[t("v-list-item-content",[t("v-list-item-title"),t("v-row",[t("v-col",{staticStyle:{"text-align":"left"},attrs:{cols:"4"}},[t("TipoTransporte",{attrs:{horario:e}}),t("strong",{staticStyle:{"font-size":"1.2rem"}},[r._v(r._s(e.nombreRuta))])],1),t("v-col",{staticStyle:{"font-size":"1rem"},attrs:{cols:"8"}},[t("v-icon",[r._v("mdi-clock-outline")]),r._v(" "+r._s(e.hora)+" | "),t("strong",{staticStyle:{"font-size":"1.3rem"}},[r._v(r._s(r._f("milisegundosConHoras")(e.tiempoGeneral)))])],1)],1)],1)],1),t("v-divider")],1)}))],2)},Ur=[],Nr=(t("4160"),t("159b"),{}),$r={components:{TipoTransporte:Rr},data:function(){return{horarios:[],rutas:[],numeroSeleccionado:null,tipoUnidad:null,unidades:[P.TIPO_ROJO,P.TIPO_COMBI]}},mounted:function(){this.obtenerRutas(),this.obtenerReporte(),this.tipoUnidad=this.unidades[1]},methods:{obtenerNombreRutaSegunId:function(r){return Nr[r].nombre},obtenerColorRutaSegunId:function(r){return Nr[r].color},obtenerRutas:function(){return Object(l["a"])(regeneratorRuntime.mark((function r(){var e;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return Nr={},r.next=3,M.obtener();case 3:e=r.sent,e.forEach((function(r){Nr[r._id]={nombre:r.nombre,color:r.color}}));case 5:case"end":return r.stop()}}),r)})))()},obtenerReporte:function(){var r=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var t,a,n,o,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r.tipoUnidad&&r.numeroSeleccionado){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,N.obtenerPorTipoUnidadYNumero(r.tipoUnidad,r.numeroSeleccionado);case 4:for(t=e.sent,t.reverse(),t.forEach((function(e){e.nombreRuta=r.obtenerNombreRutaSegunId(e.idRuta),e.colorRuta=r.obtenerColorRutaSegunId(e.idRuta)})),a=t.length-2;a>=0;a--)n=t[a].hora,o=t[a+1].hora,i=A.restarHorarios(n,o),t[a].tiempoGeneral=i;r.horarios=t;case 9:case"end":return e.stop()}}),e)})))()}}},Mr=$r,Jr=Object(p["a"])(Mr,Fr,Ur,!1,null,null,null),zr=Jr.exports;b()(Jr,{VCard:R["a"],VCol:Ir["a"],VDivider:X["a"],VIcon:K["a"],VListItem:Q["a"],VListItemContent:rr["a"],VListItemTitle:rr["b"],VRow:kr["a"],VSelect:Er["a"],VTextField:B["a"]});var Lr=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("v-card",{staticClass:"py-6 px-6",attrs:{flat:""}},[t("v-alert",{attrs:{type:"info"}},[t("h2",[r._v("Acerca de")]),t("p",[r._v("Creado y mantenido por "),t("a",{staticClass:"text-button",attrs:{href:"https://parzibyte.me/blog"}},[r._v("Parzibyte")]),r._v(". Código fuente disponible en "),t("a",{attrs:{href:"https://parzibyte.me/blog"}},[r._v("parzibyte.me/blog")])]),t("h2",[r._v("Créditos")]),t("p",[r._v(" Iconos diseñados por "),t("a",{attrs:{href:"https://www.freepik.com",title:"Freepik"}},[r._v("Freepik")]),r._v(" from "),t("a",{attrs:{href:"https://www.flaticon.es/",title:"Flaticon"}},[r._v("www.flaticon.es")])])])],1)},Br=[],Gr={name:"AcercaDe"},Yr=Gr,Zr=(t("742b"),Object(p["a"])(Yr,Lr,Br,!1,null,"109b8790",null)),qr=Zr.exports;b()(Zr,{VAlert:W["a"],VCard:R["a"]});var Wr=function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("v-card",{staticClass:"mx-1 my-1",attrs:{flat:""}},[t("v-btn",{attrs:{color:"primary",fab:"",elevation:"2",right:"",bottom:"",fixed:""},on:{click:function(e){return r.obtenerReporte()}}},[t("v-icon",[r._v("mdi-refresh")])],1),r._l(r.horarios,(function(e,a){return t("div",{key:a},[t("v-list-item",{style:{backgroundColor:e.colorRuta},attrs:{"two-line":""}},[t("v-list-item-content",[t("v-list-item-title"),t("v-row",[t("v-col",{staticStyle:{"text-align":"left",margin:"0","padding-bottom":"0","padding-top":"0"},attrs:{cols:"4"}},[t("TipoTransporte",{attrs:{horario:e}}),t("strong",{staticStyle:{"font-size":"1.2rem"}},[r._v(r._s(e.nombreRuta))])],1),t("v-col",{staticStyle:{"font-size":"1rem"},attrs:{cols:"8"}},[t("v-icon",[r._v("mdi-clock-outline")]),r._v(" "+r._s(e.hora)+" | "),t("strong",{staticStyle:{"font-size":"1.3rem"}},[r._v(r._s(r._f("milisegundosCortos")(e.tiempoMismaRuta))+" ")])],1)],1)],1)],1),t("v-divider")],1)}))],2)},Xr=[],Kr={},Qr={components:{TipoTransporte:Rr},data:function(){return{horarios:[],rutas:[]}},mounted:function(){var r=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r.obtenerRutas();case 2:return e.next=4,r.obtenerReporte();case 4:case"end":return e.stop()}}),e)})))()},methods:{obtenerRutaSegunId:function(r){return Kr[r]},obtenerRutas:function(){return Object(l["a"])(regeneratorRuntime.mark((function r(){var e;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return Kr={},r.next=3,M.obtener();case 3:e=r.sent,e.forEach((function(r){Kr[r._id]=r}));case 5:case"end":return r.stop()}}),r)})))()},obtenerReporte:function(){var r=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var t,a,n,o,i,s,c,u,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,N.obtenerPorTipoUnidad(P.TIPO_ROJO);case 2:for(t=e.sent,t.reverse(),t.forEach((function(e){var t=r.obtenerRutaSegunId(e.idRuta);e.nombreRuta=t.nombre,e.colorRuta=t.color})),a=t.length-2;a>=0;a--)n=t[a].hora,o=t[a+1].hora,i=A.restarHorarios(n,o),t[a].tiempoGeneral=i;for(s={},c=t.length-1;c>=0;c--)u=t[c].hora,l=t[c].nombreRuta,t[c].tiempoMismaRuta=0,s[l]&&(t[c].tiempoMismaRuta=A.restarHorarios(u,s[l])),s[l]=u;r.horarios=t;case 9:case"end":return e.stop()}}),e)})))()}}},re=Qr,ee=Object(p["a"])(re,Wr,Xr,!1,null,null,null),te=ee.exports;b()(ee,{VBtn:g["a"],VCard:R["a"],VCol:Ir["a"],VDivider:X["a"],VIcon:K["a"],VListItem:Q["a"],VListItemContent:rr["a"],VListItemTitle:rr["b"],VRow:kr["a"]});var ae={name:"HelloWorld",components:{AcercaDe:qr,Reportes:Pr,Horarios:Cr,Rutas:ar,ReportePorUnidad:zr,Rojos:te},data:function(){return{tab:1}},methods:{actualizarReporte:function(){this.$refs.reportes.refrescarTodo()},actualizarRutasEnHorarios:function(){this.$refs.horarios.obtenerRutas()}}},ne=ae,oe=t("71a3"),ie=t("c671"),se=t("fe57"),ce=t("aac8"),ue=t("9a96"),le=Object(p["a"])(ne,i,s,!1,null,null,null),de=le.exports;b()(le,{VIcon:K["a"],VTab:oe["a"],VTabItem:ie["a"],VTabs:se["a"],VTabsItems:ce["a"],VTabsSlider:ue["a"]});var me={name:"App",components:{Principal:de},data:function(){return{}}},fe=me,ve=(t("cf25"),t("7496")),pe=t("f6c4"),he=Object(p["a"])(fe,n,o,!1,null,null,null),be=he.exports;b()(he,{VApp:ve["a"],VMain:pe["a"]});t("5363");var ge=t("f309");a["a"].use(ge["a"]);var Re=new ge["a"]({icons:{iconfont:"mdi"}}),_e=t("a65d"),xe=t.n(_e),we=new Intl.DateTimeFormat("es-MX",{timeStyle:"medium"});a["a"].use(xe.a),a["a"].config.productionTip=!1,a["a"].filter("formatearFecha",(function(r){return we.format(r)})),a["a"].filter("milisegundosALegible",(function(r){if(!r)return"-";var e=new Date(r).toISOString().substr(11,8),t=parseInt(e.substring(0,2)),a=parseInt(e.substring(3,5)),n=parseInt(e.substring(6,8)),o="";return t&&(o=o.concat("".concat(t," hr").concat(t>1?"s":""," "))),a&&(o=o.concat("".concat(a," min").concat(a>1?"s":""," "))),n&&(o=o.concat("".concat(n," seg").concat(n>1?"s":""," "))),o})),a["a"].filter("milisegundosCortos",(function(r){if(!r)return"-";var e=new Date(r).toISOString().substr(14,5);return e})),a["a"].filter("milisegundosConHoras",(function(r){if(!r)return"-";var e=new Date(r).toISOString().substr(11,8);return e})),new a["a"]({vuetify:Re,render:function(r){return r(be)}}).$mount("#app")},"742b":function(r,e,t){"use strict";t("8a84")},"8a84":function(r,e,t){},cf25:function(r,e,t){"use strict";t("fea6")},fea6:function(r,e,t){}});
//# sourceMappingURL=app.d288f8ec.js.map