(function(e){function r(r){for(var a,i,s=r[0],c=r[1],u=r[2],d=0,m=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&m.push(n[i][0]),n[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(e[a]=c[a]);l&&l(r);while(m.length)m.shift()();return o.push.apply(o,u||[]),t()}function t(){for(var e,r=0;r<o.length;r++){for(var t=o[r],a=!0,s=1;s<t.length;s++){var c=t[s];0!==n[c]&&(a=!1)}a&&(o.splice(r--,1),e=i(i.s=t[0]))}return e}var a={},n={app:0},o=[];function i(r){if(a[r])return a[r].exports;var t=a[r]={i:r,l:!1,exports:{}};return e[r].call(t.exports,t,t.exports,i),t.l=!0,t.exports}i.m=e,i.c=a,i.d=function(e,r,t){i.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,r){if(1&r&&(e=i(e)),8&r)return e;if(4&r&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(i.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var a in e)i.d(t,a,function(r){return e[r]}.bind(null,a));return t},i.n=function(e){var r=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(r,"a",r),r},i.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},i.p="./";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=r,s=s.slice();for(var u=0;u<s.length;u++)r(s[u]);var l=c;o.push([0,"chunk-vendors"]),t()})({0:function(e,r,t){e.exports=t("56d7")},1:function(e,r){},"56d7":function(e,r,t){"use strict";t.r(r);t("99af"),t("4de4"),t("e260"),t("e6cf"),t("cca6"),t("a79d");var a=t("2b0e"),n=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("v-app",[t("v-main",[t("Principal")],1)],1)},o=[],i=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("v-tabs",{attrs:{"background-color":"cyan",dark:"","fixed-tabs":"","icons-and-text":""},model:{value:e.tab,callback:function(r){e.tab=r},expression:"tab"}},[t("v-tabs-slider",{attrs:{color:"yellow"}}),t("v-tab",[e._v(" Horarios "),t("v-icon",[e._v("mdi-clipboard-clock")])],1),t("v-tab",[e._v(" Reportes "),t("v-icon",[e._v("mdi-file-table-box-multiple")])],1),t("v-tab",[e._v(" Unidades "),t("v-icon",[e._v("mdi-bus-clock")])],1),t("v-tab",[e._v(" Rojos "),t("v-icon",[e._v("mdi-bus-clock")])],1),t("v-tab",[e._v(" Comisiones "),t("v-icon",[e._v("mdi-currency-usd")])],1),t("v-tab",[e._v(" Rutas "),t("v-icon",[e._v("mdi-bus")])],1),t("v-tab",[e._v(" fija "),t("v-icon",[e._v("mdi-bus")])],1),t("v-tab",[e._v(" Acerca de "),t("v-icon",[e._v("mdi-information-outline")])],1)],1),t("v-tabs-items",{model:{value:e.tab,callback:function(r){e.tab=r},expression:"tab"}},[t("v-tab-item",[t("Horarios",{ref:"horarios"})],1),t("v-tab-item",[t("Reportes",{ref:"reportes"})],1),t("v-tab-item",[t("ReportePorUnidad")],1),t("v-tab-item",[t("Rojos")],1),t("v-tab-item",[t("Comisiones")],1),t("v-tab-item",[t("Rutas",{on:{actualizadas:e.actualizarRutasEnHorarios}})],1),t("v-tab-item",[t("RutaFija")],1),t("v-tab-item",[t("AcercaDe")],1)],1)],1)},s=[],c=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("v-card",{attrs:{flat:""}},[t("ConfirmarEliminacionRuta",{attrs:{ruta:e.rutaSeleccionada,mostrar:e.mostrarDialogoEliminar},on:{confirmado:function(r){return e.eliminarRutaSeleccionada()},cerrar:e.cerrarDialogo}}),t("AgregarRuta",{attrs:{mostrar:e.mostrarDialogoAgregar},on:{guardada:e.onRutaGuardada,cerrar:function(r){e.mostrarDialogoAgregar=!1}}}),e.rutas.length>0?t("div",e._l(e.rutas,(function(r,a){return t("div",{key:a},[t("v-list-item",{attrs:{"two-line":""},on:{click:function(t){return e.confirmarEliminacion(r)}}},[t("v-list-item-content",[t("v-list-item-title",[e._v(e._s(r.nombre))])],1)],1),t("v-divider")],1)})),0):t("div",[t("v-alert",{staticClass:"mx-2 my-2",attrs:{dense:"",type:"info"}},[e._v(" Todavía no hay rutas. Agrega una con el botón flotante ")])],1),t("v-btn",{attrs:{color:"primary",fab:"",elevation:"2",right:"",bottom:"",fixed:""},on:{click:function(r){return e.mostrarDialogoAgregarRuta()}}},[t("v-icon",[e._v("mdi-plus")])],1),t("v-snackbar",{attrs:{top:"",timeout:"700"},model:{value:e.snackbar.mostrar,callback:function(r){e.$set(e.snackbar,"mostrar",r)},expression:"snackbar.mostrar"}},[e._v(" "+e._s(e.snackbar.texto)+" ")])],1)},u=[],l=(t("96cf"),t("1da1")),d=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:e.mostrar,callback:function(r){e.mostrar=r},expression:"mostrar"}},[t("v-card",[t("v-card-title",{staticClass:"headline"},[e._v(" Confirmación ")]),t("v-card-text",[e._v("¿Eliminar "),t("strong",[e._v(e._s(e.ruta.nombre))]),e._v("?"),t("br"),e._v(" Se van a eliminar los horarios relacionados ")]),t("v-card-actions",[t("v-spacer"),t("v-btn",{attrs:{text:""},on:{click:e.cerrar}},[e._v(" Cancelar ")]),t("v-btn",{attrs:{color:"red darken-1",text:""},on:{click:e.confirmar}},[e._v(" Eliminar ")])],1)],1)],1)},m=[],f={props:["mostrar","ruta"],name:"ConfirmarEliminacionRuta",data:function(){return{}},methods:{cerrar:function(){this.$emit("cerrar")},confirmar:function(){this.$emit("confirmado")}}},v=f,p=t("2877"),h=t("6544"),b=t.n(h),g=t("8336"),_=t("b0af"),R=t("99d9"),x=t("169a"),O=t("2fa4"),w=Object(p["a"])(v,d,m,!1,null,"6fe8b434",null),S=w.exports;b()(w,{VBtn:g["a"],VCard:_["a"],VCardActions:R["a"],VCardText:R["b"],VCardTitle:R["c"],VDialog:x["a"],VSpacer:O["a"]});var k=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("v-dialog",{attrs:{persistent:"","max-width":"290"},model:{value:e.mostrar,callback:function(r){e.mostrar=r},expression:"mostrar"}},[t("v-card",[t("v-card-title",{staticClass:"headline"},[e._v(" Nueva ruta ")]),t("v-form",{ref:"formulario",staticClass:"mx-2",model:{value:e.formularioValido,callback:function(r){e.formularioValido=r},expression:"formularioValido"}},[t("v-text-field",{attrs:{rules:e.reglasValidacion.nombre,label:"Nombre",required:""},model:{value:e.ruta.nombre,callback:function(r){e.$set(e.ruta,"nombre",r)},expression:"ruta.nombre"}}),t("v-text-field",{style:{backgroundColor:e.ruta.color},attrs:{label:"Color",type:"color"},model:{value:e.ruta.color,callback:function(r){e.$set(e.ruta,"color",r)},expression:"ruta.color"}})],1),t("v-card-actions",[t("v-spacer"),t("v-btn",{attrs:{text:""},on:{click:e.cerrar}},[e._v(" Cancelar ")]),t("v-btn",{attrs:{color:"green darken-1",disabled:!e.formularioValido,text:""},on:{click:e.guardar}},[e._v(" Guardar ")])],1)],1)],1)},C=[],I=(t("7db0"),t("16b2")),V=t("5d16");I["a"].plugin(V["a"]);var j=new I["a"]("rutas");j.createIndex({index:{fields:["hora"]}});var T=j,y=(t("d3b7"),t("25f0"),{restarHorarios:function(e,r){var t=this.formatearFechaActual(),a=new Date(t+"T"+e),n=new Date(t+"T"+r);return a-n},idConSufijo:function(e){return e.concat("_",this.formatearFechaYHoraParaId())},formatearFechaYHoraParaId:function(){var e=new Date,r=e.getMonth()+1,t=e.getDate(),a="".concat(e.getFullYear(),"-").concat(this.agregarCeroSiEsNecesario(r),"-").concat(this.agregarCeroSiEsNecesario(t)),n="".concat(this.agregarCeroSiEsNecesario(e.getHours()),"_").concat(this.agregarCeroSiEsNecesario(e.getMinutes()),"_").concat(this.agregarCeroSiEsNecesario(e.getSeconds()));return a+"_"+n},formatearHoraActual:function(){var e=new Date;return"".concat(this.agregarCeroSiEsNecesario(e.getHours()),":").concat(this.agregarCeroSiEsNecesario(e.getMinutes()),":").concat(this.agregarCeroSiEsNecesario(e.getSeconds()))},formatearFechaActual:function(){var e=new Date,r=e.getMonth()+1,t=e.getDate();return"".concat(e.getFullYear(),"-").concat(this.agregarCeroSiEsNecesario(r),"-").concat(this.agregarCeroSiEsNecesario(t))},agregarCeroSiEsNecesario:function(e){return e<10?"0".concat(e):e.toString()}}),A=y,E="Rojo",H="R-3",P={TIPO_ROJO:E,TIPO_COMBI:H,TIPOS_UNIDAD:[H,E],PREFIJO_RUTAS:"rutas",PREFIJO_HORARIOS:"horarios",PREFIJO_COMISIONES:"comisiones",NUMEROS_PARA_COMISION:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,27,28,29,30,31,33,34,35,36,37,38,39,40,41,42,43,46,47]},D=P,$=(t("a434"),t("b85c")),F={obtenerPorTipoUnidad:function(e){return Object(l["a"])(regeneratorRuntime.mark((function r(){var t;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,T.find({selector:{_id:{$gte:D.PREFIJO_HORARIOS,$lte:D.PREFIJO_HORARIOS+"￰"},tipoUnidad:e,hora:{$gte:null}}});case 2:return t=r.sent,r.abrupt("return",t.docs);case 4:case"end":return r.stop()}}),r)})))()},obtenerPorTipoUnidadYNumero:function(e,r){return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,T.find({selector:{_id:{$gte:D.PREFIJO_HORARIOS,$lte:D.PREFIJO_HORARIOS+"￰"},tipoUnidad:e,numero:r,hora:{$gte:null}}});case 2:return a=t.sent,t.abrupt("return",a.docs);case 4:case"end":return t.stop()}}),t)})))()},eliminarDeRuta:function(e){return Object(l["a"])(regeneratorRuntime.mark((function r(){var t,a,n,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,T.find({selector:{_id:{$gte:D.PREFIJO_HORARIOS,$lte:D.PREFIJO_HORARIOS+"￰"},idRuta:e}});case 2:t=r.sent,a=Object($["a"])(t.docs),r.prev=4,a.s();case 6:if((n=a.n()).done){r.next=14;break}return o=n.value,console.log("Eliminando"),console.log(o),r.next=12,T.remove(o);case 12:r.next=6;break;case 14:r.next=19;break;case 16:r.prev=16,r.t0=r["catch"](4),a.e(r.t0);case 19:return r.prev=19,a.f(),r.finish(19);case 22:case"end":return r.stop()}}),r,null,[[4,16,19,22]])})))()},nuevo:function(e,r,t,a,n){return Object(l["a"])(regeneratorRuntime.mark((function o(){return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,T.put({_id:A.idConSufijo(D.PREFIJO_HORARIOS),idRuta:e,fecha:r,hora:t,tipoUnidad:a,numero:n});case 2:return o.abrupt("return",o.sent);case 3:case"end":return o.stop()}}),o)})))()},obtenerNumerosPorFechaRutaYTipoUnidad:function(e,r,t){return Object(l["a"])(regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,T.find({selector:{_id:{$gte:D.PREFIJO_HORARIOS,$lte:D.PREFIJO_HORARIOS+"￰"},fecha:e,idRuta:r,tipoUnidad:t,hora:{$gte:null}}});case 2:return n=a.sent,a.abrupt("return",n.docs);case 4:case"end":return a.stop()}}),a)})))()},obtenerPorFechaEIdRuta:function(e,r){return Object(l["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,T.find({selector:{_id:{$gte:D.PREFIJO_HORARIOS,$lte:D.PREFIJO_HORARIOS+"￰"},fecha:e,idRuta:r,hora:{$gte:null}},sort:[{hora:"desc"}]});case 2:return a=t.sent,t.abrupt("return",a.docs);case 4:case"end":return t.stop()}}),t)})))()},obtenerUltimoHorarioRegistrado:function(e,r){return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,T.find({selector:{_id:{$gte:D.PREFIJO_HORARIOS,$lte:D.PREFIJO_HORARIOS+"￰"},fecha:e,idRuta:r,hora:{$gt:null}},sort:[{hora:"desc"}],limit:2});case 2:if(a=t.sent,n=a.docs,!(n.length<=0)){t.next=6;break}return t.abrupt("return","");case 6:return t.abrupt("return",n.splice(0,2));case 7:case"end":return t.stop()}}),t)})))()},eliminar:function(e){return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,T.remove(e);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))()}},N=F,U={nueva:function(e,r){return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,T.put({_id:A.idConSufijo(D.PREFIJO_RUTAS),nombre:e,color:r});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))()},obtener:function(){return Object(l["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T.find({selector:{_id:{$gte:D.PREFIJO_RUTAS,$lte:D.PREFIJO_RUTAS+"￰"}}});case 2:return r=e.sent,e.abrupt("return",r.docs);case 4:case"end":return e.stop()}}),e)})))()},eliminar:function(e){return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,N.eliminarDeRuta(e._id);case 2:return r.next=4,T.remove(e);case 4:return r.abrupt("return",r.sent);case 5:case"end":return r.stop()}}),r)})))()}},J=U,M={name:"AgregarRuta",props:["mostrar"],data:function(){return{ruta:{nombre:"",color:"ffffff"},formularioValido:!1,reglasValidacion:{nombre:[function(e){return!!e||"Escribe el nombre"}]}}},methods:{antesDeCerrar:function(){this.$refs.formulario.resetValidation(),this.$refs.formulario.reset()},cerrar:function(){this.antesDeCerrar(),this.$emit("cerrar")},guardar:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,J.nueva(e.ruta.nombre,e.ruta.color);case 2:e.ruta.nombre="",e.ruta.color="ffffff",e.antesDeCerrar(),e.$emit("guardada");case 6:case"end":return r.stop()}}),r)})))()}}},z=M,L=t("4bd4"),B=t("8654"),G=Object(p["a"])(z,k,C,!1,null,null,null),Y=G.exports;b()(G,{VBtn:g["a"],VCard:_["a"],VCardActions:R["a"],VCardTitle:R["c"],VDialog:x["a"],VForm:L["a"],VSpacer:O["a"],VTextField:B["a"]});var Z={name:"Rutas",components:{AgregarRuta:Y,ConfirmarEliminacionRuta:S},data:function(){return{rutas:[],rutaSeleccionada:{},mostrarDialogoEliminar:!1,mostrarDialogoAgregar:!1,snackbar:{mostrar:!1,texto:""}}},mounted:function(){this.obtenerRutas()},methods:{onRutaGuardada:function(){this.snackbar.mostrar=!0,this.snackbar.texto="Ruta guardada",this.mostrarDialogoAgregar=!1,this.$emit("actualizadas"),this.obtenerRutas()},mostrarDialogoAgregarRuta:function(){this.mostrarDialogoAgregar=!0},confirmarEliminacion:function(e){this.rutaSeleccionada=e,this.mostrarDialogoEliminar=!0},eliminarRutaSeleccionada:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,J.eliminar(e.rutaSeleccionada);case 2:e.rutaSeleccionada={},e.mostrarDialogoEliminar=!1,e.$emit("actualizadas"),e.obtenerRutas();case 6:case"end":return r.stop()}}),r)})))()},cerrarDialogo:function(){this.mostrarDialogoEliminar=!1},obtenerRutas:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,J.obtener();case 2:e.rutas=r.sent;case 3:case"end":return r.stop()}}),r)})))()}}},q=Z,W=t("0798"),K=t("ce7e"),Q=t("132d"),X=t("da13"),ee=t("5d23"),re=t("2db4"),te=Object(p["a"])(q,c,u,!1,null,"156af335",null),ae=te.exports;b()(te,{VAlert:W["a"],VBtn:g["a"],VCard:_["a"],VDivider:K["a"],VIcon:Q["a"],VListItem:X["a"],VListItemContent:ee["a"],VListItemTitle:ee["b"],VSnackbar:re["a"]});var ne=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("v-card",{attrs:{flat:""}},[t("DialogoAgregarHorario",{attrs:{ruta:e.rutaSeleccionada,mostrar:e.dialogoRegistrarHorario},on:{guardado:e.onHorarioGuardado,cerrar:function(r){e.dialogoRegistrarHorario=!1}}}),t("v-row",[t("v-col",{directives:[{name:"show",rawName:"v-show",value:e.mostrarNotas,expression:"mostrarNotas"}],staticStyle:{padding:"0"},attrs:{cols:"2"}},[e.rutasTemporales.length>0?t("div",e._l(e.rutasTemporales,(function(r,a){return t("div",{key:a,on:{click:function(t){return e.clickRutaTemporal(r)}}},[t("v-list-item",{style:{backgroundColor:r.marcada?"#FF8F00":"white"},attrs:{"two-line":""}},[t("v-list-item-content",[t("v-list-item-title",{staticStyle:{"font-size":"0.77rem"}},[t("strong",[e._v(e._s(r.nombre)),t("br"),e._v(e._s(r.sufijo))])])],1)],1),t("v-divider")],1)})),0):e._e()]),t("v-col",{attrs:{cols:e.mostrarNotas?10:12}},[e.rutas.length>0?t("div",e._l(e.rutas,(function(r,a){return t("div",{key:a},[t("v-list-item",{style:{backgroundColor:r.color},attrs:{"three-line":""},on:{click:function(t){return e.registrarHorario(r,a)}}},[t("v-list-item-content",{staticStyle:{padding:"0",margin:"0"}},[t("v-list-item-title",[t("h5",{staticClass:"text-h4",staticStyle:{"text-align":"right","margin-bottom":"10px"}},[e._v(" "+e._s(r.nombre)+" ")]),r.horarios?t("div",e._l(r.horarios,(function(r,a){return t("v-row",{key:a},[0===a?[t("v-col",{staticStyle:{"padding-bottom":"0 !important","padding-top":"0 !important",margin:"0 !important"},attrs:{cols:"3"}},[0===a?t("TipoTransporte",{attrs:{horario:r}}):e._e()],1),t("v-col",{staticStyle:{"padding-bottom":"0 !important","padding-top":"0 !important",margin:"0 !important","font-size":"1.2rem"},style:{backgroundColor:r.transcurrido>=e.rangoNotificacionInicio&&r.transcurrido<=e.rangoNotificacionFin&&0===a&&e.esRojo(r)?"white":"inherit"},attrs:{cols:"9"}},[e._v(" "+e._s(r.hora)+" | "),t("strong",{style:{fontSize:0===a?"1.5rem":"1.2rem"}},[e._v(e._s(e._f("milisegundosCortos")(r.transcurrido)))])])]:[t("v-col",{staticStyle:{"padding-top":"0 !important","padding-bottom":"0 !important","text-align":"right"},attrs:{cols:"12"}},[t("p",[e._v(" Se llevó "),t("strong",[e._v(e._s(e._f("milisegundosCortos")(r.transcurrido)))]),e._v(" de "+e._s(r.tipoUnidad)+":"),t("strong",[e._v(e._s(r.numero))])])])]],2)})),1):t("div",[t("p",[e._v("Sin información de horario. Toca para agregar")])])])],1)],1),t("v-divider")],1)})),0):t("div",[t("v-alert",{staticClass:"mx-2 my-2",attrs:{dense:"",type:"info"}},[e._v(" Todavía no hay rutas. Ve a "),t("strong",[e._v("Rutas")]),e._v(" y agrega algunas ")])],1)])],1),t("v-snackbar",{attrs:{top:"",timeout:"700"},model:{value:e.snackbar.mostrar,callback:function(r){e.$set(e.snackbar,"mostrar",r)},expression:"snackbar.mostrar"}},[e._v(" "+e._s(e.snackbar.texto)+" ")])],1)},oe=[],ie=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("v-dialog",{attrs:{persistent:"","max-width":"350"},model:{value:e.mostrar,callback:function(r){e.mostrar=r},expression:"mostrar"}},[t("v-card",{staticClass:"pt-2"},[t("v-container",[t("v-text-field",{ref:"campoNumero",attrs:{label:"Número",type:"number"},model:{value:e.numeroUnidad,callback:function(r){e.numeroUnidad=r},expression:"numeroUnidad"}})],1),t("v-alert",{staticClass:"mx-2 my-2",attrs:{dense:"",type:"success"}},[t("strong",{staticClass:"text-h4"},[e._v(e._s(e.ruta.nombre)+" | "+e._s(e.numeroUnidad))])]),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.tomarHoraActual,expression:"!tomarHoraActual"}]},[t("v-time-picker",{attrs:{"full-width":"",format:"ampm","use-seconds":""},model:{value:e.horario,callback:function(r){e.horario=r},expression:"horario"}}),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.horario,expression:"!horario"}]},[t("p",[e._v("Por favor selecciona el horario")])]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.horario,expression:"horario"}]},[e._v(" Se registrará con la hora: "),t("strong",[e._v(e._s(e.horario))])])],1),t("v-card-actions",[t("v-spacer"),t("v-btn",{attrs:{dark:"",color:"red",large:""},on:{click:function(r){return e.guardarMicro()}}},[e._v(" Rojo ")]),t("v-btn",{attrs:{large:"",text:""},on:{click:e.cerrar}},[e._v(" Cancelar ")]),t("v-btn",{attrs:{color:"blue ",large:"",dark:""},on:{click:function(r){return e.guardarCombi()}}},[e._v(" R-3 ")])],1)],1)],1)},se=[],ce={props:["mostrar","ruta"],name:"DialogoAgregarHorario",data:function(){return{horario:"",horaRefrescada:"",idInterval:null,tomarHoraActual:!0,tipos:[],tipoUnidad:"",numeroUnidad:""}},mounted:function(){var e=this;this.tipos=D.TIPOS_UNIDAD,this.tipoUnidad=this.tipos[0],this.idInterval=setInterval((function(){e.refrescarHora()}),500)},beforeDestroy:function(){console.log("Destroy!")},watch:{mostrar:function(){var e=this;this.mostrar&&setTimeout((function(){e.$refs.campoNumero.$refs.input.focus()}),50)}},methods:{guardarCombi:function(){this.tipoUnidad=D.TIPO_COMBI,this.guardar()},guardarMicro:function(){this.tipoUnidad=D.TIPO_ROJO,this.guardar()},antesDeCerrar:function(){this.tipoUnidad=this.tipos[0],this.numeroUnidad=""},refrescarHora:function(){this.horaRefrescada=A.formatearHoraActual()},cerrar:function(){this.antesDeCerrar(),this.$emit("cerrar")},guardar:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var t;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.tomarHoraActual||e.horario){r.next=2;break}return r.abrupt("return");case 2:return t="",t=e.tomarHoraActual?A.formatearHoraActual():e.horario,r.next=6,N.nuevo(e.ruta._id,A.formatearFechaActual(),t,e.tipoUnidad,e.numeroUnidad);case 6:e.antesDeCerrar(),e.$emit("guardado");case 8:case"end":return r.stop()}}),r)})))()}}},ue=ce,le=t("a523"),de=t("c964"),me=Object(p["a"])(ue,ie,se,!1,null,null,null),fe=me.exports;b()(me,{VAlert:W["a"],VBtn:g["a"],VCard:_["a"],VCardActions:R["a"],VContainer:le["a"],VDialog:x["a"],VSpacer:O["a"],VTextField:B["a"],VTimePicker:de["a"]});var ve=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",[t("v-btn",{staticClass:"white--text",staticStyle:{border:"1px solid white !important"},attrs:{color:this.esRojo()?"error":"info",depressed:""}},[e._v(" "+e._s(e.horario.numero)+" ")])],1)},pe=[],he={name:"TipoTransporte",props:["horario"],methods:{esRojo:function(){return this.horario.tipoUnidad===D.TIPO_ROJO}}},be=he,ge=Object(p["a"])(be,ve,pe,!1,null,"15f24d78",null),_e=ge.exports;b()(ge,{VBtn:g["a"]});var Re={name:"Horarios",components:{TipoTransporte:_e,DialogoAgregarHorario:fe},data:function(){return{ultimoIndice:null,rangoNotificacionInicio:3e5,rangoNotificacionFin:42e4,snackbar:{texto:"",mostrar:!1},mostrarNotas:!0,dialogoRegistrarHorario:!1,rutas:[],rutasTemporales:[{nombre:"  ",marcada:!1,sufijo:""},{nombre:"TALZ",marcada:!1,sufijo:""},{nombre:"TEZO",marcada:!1,sufijo:""},{nombre:"CALI",marcada:!1,sufijo:""},{nombre:"SOSA",marcada:!1,sufijo:""},{nombre:"SANI",marcada:!1,sufijo:""},{nombre:"TALZ",marcada:!1,sufijo:""},{nombre:"TEZO",marcada:!1,sufijo:""},{nombre:"CALI",marcada:!1,sufijo:""},{nombre:"SOSA",marcada:!1,sufijo:""},{nombre:"SANI",marcada:!1,sufijo:""}],rutaSeleccionada:{},idInterval:null,pausado:!1}},mounted:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.obtenerRutas();case 2:e.iniciarIntervalRefrescarTiempo();case 3:case"end":return r.stop()}}),r)})))()},methods:{clickRutaTemporal:function(e){e.marcada=!e.marcada,e.marcada?e.sufijo=prompt("Ingresa el texto: "):e.sufijo=""},esRojo:function(e){return e.tipoUnidad===D.TIPO_ROJO},intercambiarVista:function(){this.mostrarNotas=!this.mostrarNotas},clickBoton:function(){this.pausado?(this.iniciarIntervalRefrescarTiempo(),this.pausado=!1):(clearInterval(this.idInterval),this.pausado=!0)},iniciarIntervalRefrescarTiempo:function(){var e=this;clearInterval(this.idInterval),this.refrescarTiempoTranscurrido(),this.idInterval=setInterval((function(){e.refrescarTiempoTranscurrido()}),5e3)},refrescarTiempoTranscurrido:function(){var e,r=A.formatearFechaActual(),t=new Date,a=Object($["a"])(this.rutas);try{for(a.s();!(e=a.n()).done;){var n,o=e.value,i=0,s=Object($["a"])(o.horarios);try{for(s.s();!(n=s.n()).done;){var c=n.value;if(c.hora){var u=new Date(r+"T"+c.hora);c.transcurrido=t-u,1===i&&(c.transcurrido=new Date(r+"T"+o.horarios[0].hora)-u),i++}else o.transcurrido=""}}catch(l){s.e(l)}finally{s.f()}}}catch(l){a.e(l)}finally{a.f()}},onHorarioGuardado:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:e.snackbar={texto:"Horario guardado",mostrar:!0},e.dialogoRegistrarHorario=!1,e.colocarHorarioARuta(e.ultimoIndice);case 3:case"end":return r.stop()}}),r)})))()},registrarHorario:function(e,r){this.ultimoIndice=r,this.rutaSeleccionada=e,this.dialogoRegistrarHorario=!0},colocarHorarioARuta:function(e){var r=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var a,n,o,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=A.formatearFechaActual(),t.next=3,N.obtenerUltimoHorarioRegistrado(a,r.rutas[e]._id);case 3:n=t.sent,o=Object($["a"])(n);try{for(o.s();!(i=o.n()).done;)s=i.value,s.transcurrido=0}catch(c){o.e(c)}finally{o.f()}r.rutas[e].horarios=n;case 7:case"end":return t.stop()}}),t)})))()},obtenerRutas:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var t,a,n,o,i,s,c,u,l;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return t=A.formatearFechaActual(),r.next=3,J.obtener();case 3:a=r.sent,n=Object($["a"])(a),r.prev=5,n.s();case 7:if((o=n.n()).done){r.next=19;break}return i=o.value,r.next=11,N.obtenerUltimoHorarioRegistrado(t,i._id);case 11:s=r.sent,c=Object($["a"])(s);try{for(c.s();!(u=c.n()).done;)l=u.value,l.transcurrido=0}catch(d){c.e(d)}finally{c.f()}i.horarios=s,i.transcurrido=0,i.marcada=!1;case 17:r.next=7;break;case 19:r.next=24;break;case 21:r.prev=21,r.t0=r["catch"](5),n.e(r.t0);case 24:return r.prev=24,n.f(),r.finish(24);case 27:e.rutas=a;case 28:case"end":return r.stop()}}),r,null,[[5,21,24,27]])})))()}}},xe=Re,Oe=t("62ad"),we=t("0fd9"),Se=Object(p["a"])(xe,ne,oe,!1,null,null,null),ke=Se.exports;b()(Se,{VAlert:W["a"],VCard:_["a"],VCol:Oe["a"],VDivider:K["a"],VListItem:X["a"],VListItemContent:ee["a"],VListItemTitle:ee["b"],VRow:we["a"],VSnackbar:re["a"]});var Ce=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("v-card",{staticStyle:{"background-color":"#18ffff",margin:"0 40px 0 40px"},attrs:{flat:""}},[t("v-select",{attrs:{items:e.rutas,"item-text":"nombre","item-value":"_id",label:"Ruta","no-data-text":"No has registrado ninguna ruta"},on:{change:function(r){return e.obtenerHorariosConFechaYRutaSeleccionada()}},scopedSlots:e._u([{key:"item",fn:function(r){var a=r.item;return[t("h1",[e._v(e._s(a.nombre))])]}}]),model:{value:e.rutaSeleccionada,callback:function(r){e.rutaSeleccionada=r},expression:"rutaSeleccionada"}}),e.horarios.length>0?t("div",[t("v-row",{attrs:{justify:"center"}},[t("h6",{staticClass:"text-h5 mb-2"},[e._v(" Promedio R3: "+e._s(e._f("milisegundosCortos")(e.promedios.combi))+" ")])]),t("v-divider"),e._l(e.horarios,(function(r,a){return t("div",{key:a},[t("v-list-item",{attrs:{"two-line":""}},[t("v-list-item-content",[t("v-list-item-title"),t("v-row",[t("v-col",{staticStyle:{"text-align":"right"},attrs:{cols:"4"}},[t("TipoTransporte",{attrs:{horario:r}})],1),t("v-col",{staticStyle:{"font-size":"1rem"},attrs:{cols:"8"}},[t("v-icon",[e._v("mdi-clock-outline")]),e._v(" "+e._s(r.hora)+" | "),t("strong",{staticStyle:{"font-size":"1.3rem"}},[e._v(e._s(e._f("milisegundosCortos")(r.tiempoGeneral)))])],1)],1)],1)],1),t("v-divider")],1)}))],2):t("div",[t("v-alert",{attrs:{type:"info"}},[e._v(" No hay horarios para la fecha y ruta seleccionados ")])],1)],1)},Ie=[],Ve={name:"Reportes",components:{TipoTransporte:_e},data:function(){return{fechaSeleccionada:"",rutas:[],modal:!1,rutaSeleccionada:"",horarios:[],promedios:{rojo:"",combi:"",general:""},TIPO_COMBI:D.TIPO_COMBI}},mounted:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.obtenerRutas();case 2:e.fechaSeleccionada=A.formatearFechaActual();case 3:case"end":return r.stop()}}),r)})))()},methods:{refrescarTodo:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.obtenerRutas();case 2:return e.rutas.length>0&&(e.rutaSeleccionada=e.rutas[0]._id),r.next=5,e.obtenerHorariosConFechaYRutaSeleccionada();case 5:case"end":return r.stop()}}),r)})))()},obtenerRutas:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,J.obtener();case 2:e.rutas=r.sent;case 3:case"end":return r.stop()}}),r)})))()},obtenerHorariosConFechaYRutaSeleccionada:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var t,a,n,o,i,s,c,u,l,d,m,f,v,p;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.fechaSeleccionada&&e.rutaSeleccionada){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,N.obtenerPorFechaEIdRuta(e.fechaSeleccionada,e.rutaSeleccionada);case 4:if(t=r.sent,t.length>0){for(a="",n="",o=0,i=0,s=0,c=0,u=0,t[t.length-1].tipoUnidad===D.TIPO_ROJO?a=t[t.length-1].hora:n=t[t.length-1].hora,l=t.length-2;l>=0;l--)d=t[l].hora,m=t[l+1].hora,f=A.restarHorarios(d,m),s+=f,t[l].tiempoGeneral=f,t[l].tipoUnidad===D.TIPO_ROJO?(a&&(v=A.restarHorarios(d,a),o+=v,c++,t[l].tiempoMismoTipo=v),a=d):(n&&(p=A.restarHorarios(d,n),i+=p,u++,t[l].tiempoMismoTipo=p),n=d);e.promedios.general=s/(t.length-1),e.promedios.rojo=o/c,e.promedios.combi=i/u}e.horarios=t;case 7:case"end":return r.stop()}}),r)})))()}}},je=Ve,Te=t("b974"),ye=Object(p["a"])(je,Ce,Ie,!1,null,null,null),Ae=ye.exports;b()(ye,{VAlert:W["a"],VCard:_["a"],VCol:Oe["a"],VDivider:K["a"],VIcon:Q["a"],VListItem:X["a"],VListItemContent:ee["a"],VListItemTitle:ee["b"],VRow:we["a"],VSelect:Te["a"]});var Ee=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("v-card",{staticClass:"mx-1 my-1",attrs:{flat:""}},[t("v-row",[t("v-col",[t("v-select",{attrs:{items:e.unidades,label:"Tipo de unidad"},on:{change:e.obtenerReporte},model:{value:e.tipoUnidad,callback:function(r){e.tipoUnidad=r},expression:"tipoUnidad"}})],1),t("v-col",[t("v-text-field",{attrs:{label:"Número"},on:{change:e.obtenerReporte,keyup:e.obtenerReporte},model:{value:e.numeroSeleccionado,callback:function(r){e.numeroSeleccionado=r},expression:"numeroSeleccionado"}})],1)],1),e._l(e.horarios,(function(r,a){return t("div",{key:a},[t("v-list-item",{attrs:{"two-line":""}},[t("v-list-item-content",[t("v-list-item-title"),t("v-row",[t("v-col",{staticStyle:{"text-align":"left"},attrs:{cols:"4"}},[t("TipoTransporte",{attrs:{horario:r}}),t("strong",{staticStyle:{"font-size":"1.2rem"}},[e._v(e._s(r.nombreRuta))])],1),t("v-col",{staticStyle:{"font-size":"1rem"},attrs:{cols:"8"}},[t("v-icon",[e._v("mdi-clock-outline")]),e._v(" "+e._s(r.hora)+" | "),t("strong",{staticStyle:{"font-size":"1.3rem"}},[e._v(e._s(e._f("milisegundosConHoras")(r.tiempoGeneral)))])],1)],1)],1)],1),t("v-divider")],1)}))],2)},He=[],Pe=(t("4160"),t("159b"),{}),De={components:{TipoTransporte:_e},data:function(){return{horarios:[],rutas:[],numeroSeleccionado:null,tipoUnidad:null,unidades:[D.TIPO_ROJO,D.TIPO_COMBI]}},mounted:function(){this.obtenerRutas(),this.obtenerReporte(),this.tipoUnidad=this.unidades[0]},methods:{obtenerNombreRutaSegunId:function(e){return Pe[e]},obtenerRutas:function(){return Object(l["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Pe={},e.next=3,J.obtener();case 3:r=e.sent,r.forEach((function(e){Pe[e._id]=e.nombre}));case 5:case"end":return e.stop()}}),e)})))()},obtenerReporte:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var t,a,n,o,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.tipoUnidad&&e.numeroSeleccionado){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,N.obtenerPorTipoUnidadYNumero(e.tipoUnidad,e.numeroSeleccionado);case 4:for(t=r.sent,t.reverse(),t.forEach((function(r){r.nombreRuta=e.obtenerNombreRutaSegunId(r.idRuta)})),a=t.length-2;a>=0;a--)n=t[a].hora,o=t[a+1].hora,i=A.restarHorarios(n,o),t[a].tiempoGeneral=i;e.horarios=t;case 9:case"end":return r.stop()}}),r)})))()}}},$e=De,Fe=Object(p["a"])($e,Ee,He,!1,null,null,null),Ne=Fe.exports;b()(Fe,{VCard:_["a"],VCol:Oe["a"],VDivider:K["a"],VIcon:Q["a"],VListItem:X["a"],VListItemContent:ee["a"],VListItemTitle:ee["b"],VRow:we["a"],VSelect:Te["a"],VTextField:B["a"]});var Ue=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("v-card",{staticClass:"px-1 py-1"},[t("strong",[e._v("Tepepan")]),t("ul",[t("li",[e._v("9:05")]),t("li",[e._v("10:55")]),t("li",[e._v("11:45")]),t("li",[e._v("12:20")]),t("li",[e._v("13:00")]),t("li",[e._v("14:00")]),t("li",[e._v("14:50")]),t("li",[e._v("15:25")]),t("li",[e._v("16:10")]),t("li",[e._v("16:55")]),t("li",[e._v("17:45")]),t("li",[e._v("18:05")]),t("li",[e._v("18:35")]),t("li",[e._v("19:20")]),t("li",[e._v("20:00")])]),t("strong",[e._v("Huapaltepec")]),t("ul",[t("li",[e._v("10:15")]),t("li",[e._v("12:15")]),t("li",[e._v("14:15")]),t("li",[e._v("16:15")]),t("li",[e._v("19:00")])])])},Je=[],Me={},ze=Object(p["a"])(Me,Ue,Je,!1,null,null,null),Le=ze.exports;b()(ze,{VCard:_["a"]});var Be=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("v-card",{staticClass:"py-6 px-6",attrs:{flat:""}},[t("v-alert",{attrs:{type:"info"}},[t("h2",[e._v("Acerca de")]),t("p",[e._v("Creado y mantenido por "),t("a",{staticClass:"text-button",attrs:{href:"https://parzibyte.me/blog"}},[e._v("Parzibyte")]),e._v(". Código fuente disponible en "),t("a",{attrs:{href:"https://parzibyte.me/blog"}},[e._v("parzibyte.me/blog")])]),t("h2",[e._v("Créditos")]),t("p",[e._v(" Iconos diseñados por "),t("a",{attrs:{href:"https://www.freepik.com",title:"Freepik"}},[e._v("Freepik")]),e._v(" from "),t("a",{attrs:{href:"https://www.flaticon.es/",title:"Flaticon"}},[e._v("www.flaticon.es")])])])],1)},Ge=[],Ye={name:"AcercaDe"},Ze=Ye,qe=(t("742b"),Object(p["a"])(Ze,Be,Ge,!1,null,"109b8790",null)),We=qe.exports;b()(qe,{VAlert:W["a"],VCard:_["a"]});var Ke=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("v-card",{attrs:{flat:""}},[t("DialogoAgregarComision",{attrs:{"numero-unidad":e.numeroUnidadSeleccionada,mostrar:e.dialogoComision},on:{guardado:e.onComisionGuardada,cerrar:function(r){e.dialogoComision=!1}}}),t("h2",{staticClass:"ml-2 mt-1"},[e._v("Total: $"+e._s(e.total())+" "),t("v-btn",{staticClass:"mb-3 ml-2 mt-1",attrs:{color:"info"},on:{click:e.eliminarTodas}},[e._v("Eliminar todas")])],1),e._l(e.unidades,(function(r,a){return t("v-badge",{key:a,staticClass:"mx-3 mt-2",attrs:{overlap:"",bordered:"",color:"success",content:r.comision}},[t("v-btn",{attrs:{depressed:"",color:"error"},on:{click:function(t){return e.agregarComision(r)}}},[e._v(e._s(r.numero)+" ")])],1)}))],2)},Qe=[],Xe=(t("ddb0"),t("3835")),er=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("v-dialog",{attrs:{persistent:"","max-width":"350"},model:{value:e.mostrar,callback:function(r){e.mostrar=r},expression:"mostrar"}},[t("v-card",{staticClass:"pt-2 pl-2"},[t("h2",[e._v("Unidad "+e._s(e.numeroUnidad))]),t("v-container",[t("v-text-field",{ref:"campoCantidad",attrs:{label:"Comisión",type:"number"},model:{value:e.comision,callback:function(r){e.comision=r},expression:"comision"}})],1),t("v-card-actions",[t("v-spacer"),t("v-btn",{attrs:{dark:"",color:"success",depressed:""},on:{click:function(r){return e.guardar()}}},[e._v(" Guardar ")]),t("v-btn",{attrs:{large:"",text:""},on:{click:e.cerrar}},[e._v(" Cancelar ")])],1)],1)],1)},rr=[],tr={nueva:function(e,r){return Object(l["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=parseFloat(r),t.next=3,T.put({_id:A.idConSufijo(D.PREFIJO_COMISIONES),numero:e,comision:r});case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))()},obtener:function(){return Object(l["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T.find({selector:{_id:{$gte:D.PREFIJO_COMISIONES,$lte:D.PREFIJO_COMISIONES+"￰"}}});case 2:return r=e.sent,e.abrupt("return",r.docs);case 4:case"end":return e.stop()}}),e)})))()},eliminarTodas:function(){return Object(l["a"])(regeneratorRuntime.mark((function e(){var r,t,a,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,tr.obtener();case 2:r=e.sent,t=Object($["a"])(r),e.prev=4,t.s();case 6:if((a=t.n()).done){e.next=12;break}return n=a.value,e.next=10,T.remove(n);case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e["catch"](4),t.e(e.t0);case 17:return e.prev=17,t.f(),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[4,14,17,20]])})))()}},ar=tr,nr={name:"DialogoAgregarComision",props:["numeroUnidad","mostrar"],data:function(){return{comision:null}},watch:{mostrar:function(){var e=this;this.mostrar&&setTimeout((function(){e.$refs.campoCantidad.$refs.input.focus()}),50)}},methods:{cerrar:function(){this.$emit("cerrar")},guardar:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(e.comision){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,ar.nueva(e.numeroUnidad,e.comision);case 4:e.comision=null,e.$emit("guardado");case 6:case"end":return r.stop()}}),r)})))()}}},or=nr,ir=Object(p["a"])(or,er,rr,!1,null,null,null),sr=ir.exports;b()(ir,{VBtn:g["a"],VCard:_["a"],VCardActions:R["a"],VContainer:le["a"],VDialog:x["a"],VSpacer:O["a"],VTextField:B["a"]});var cr={},ur={name:"Comisiones",components:{DialogoAgregarComision:sr},data:function(){return{unidades:[],dialogoComision:!1,numeroUnidadSeleccionada:null}},mounted:function(){this.prepararArregloNumeros(),this.refrescarComisiones()},methods:{eliminarTodas:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(confirm("¿Seguro?")){r.next=2;break}return r.abrupt("return");case 2:return r.next=4,ar.eliminarTodas();case 4:return e.prepararArregloNumeros(),r.next=7,e.refrescarComisiones();case 7:case"end":return r.stop()}}),r)})))()},total:function(){var e,r=0,t=Object($["a"])(this.unidades);try{for(t.s();!(e=t.n()).done;){var a=e.value;r+=a.comision}}catch(n){t.e(n)}finally{t.f()}return r},prepararArregloNumeros:function(){var e=D.NUMEROS_PARA_COMISION,r=[];cr={};var t,a=Object($["a"])(e.entries());try{for(a.s();!(t=a.n()).done;){var n=Object(Xe["a"])(t.value,2),o=n[0],i=n[1];cr[i]=o,r.push({numero:i,comision:0})}}catch(s){a.e(s)}finally{a.f()}this.unidades=r},refrescarComisiones:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var t,a,n,o,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,ar.obtener();case 2:t=r.sent,console.log({comisionesRegistradas:t}),a=Object($["a"])(t);try{for(a.s();!(n=a.n()).done;)o=n.value,i=cr[o.numero],(i||0===i)&&(e.unidades[i].comision=o.comision)}catch(s){a.e(s)}finally{a.f()}case 6:case"end":return r.stop()}}),r)})))()},mostrarDialogoComision:function(){this.dialogoComision=!0},agregarComision:function(e){e.comision>0||(this.numeroUnidadSeleccionada=e.numero,this.dialogoComision=!0)},onComisionGuardada:function(){this.dialogoComision=!1,this.refrescarComisiones()}}},lr=ur,dr=t("4ca6"),mr=Object(p["a"])(lr,Ke,Qe,!1,null,"074b5fc6",null),fr=mr.exports;b()(mr,{VBadge:dr["a"],VBtn:g["a"],VCard:_["a"]});var vr=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("v-card",{staticClass:"mx-1 my-1",attrs:{flat:""}},[t("v-btn",{attrs:{color:"primary",fab:"",elevation:"2",right:"",bottom:"",fixed:""},on:{click:function(r){return e.obtenerReporte()}}},[t("v-icon",[e._v("mdi-refresh")])],1),e._l(e.horarios,(function(r,a){return t("div",{key:a},[t("v-list-item",{attrs:{"two-line":""}},[t("v-list-item-content",[t("v-list-item-title"),t("v-row",[t("v-col",{staticStyle:{"text-align":"left"},attrs:{cols:"4"}},[t("TipoTransporte",{attrs:{horario:r}}),t("strong",{staticStyle:{"font-size":"1.2rem"}},[e._v(e._s(r.nombreRuta))])],1),t("v-col",{staticStyle:{"font-size":"1rem"},attrs:{cols:"8"}},[t("v-icon",[e._v("mdi-clock-outline")]),e._v(" "+e._s(r.hora)+" | "),t("strong",{staticStyle:{"font-size":"1.3rem"}},[e._v(e._s(e._f("milisegundosConHoras")(r.tiempoGeneral)))])],1)],1)],1)],1),t("v-divider")],1)}))],2)},pr=[],hr={},br={components:{TipoTransporte:_e},data:function(){return{horarios:[],rutas:[]}},mounted:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,e.obtenerRutas();case 2:return r.next=4,e.obtenerReporte();case 4:case"end":return r.stop()}}),r)})))()},methods:{obtenerNombreRutaSegunId:function(e){return hr[e]},obtenerRutas:function(){return Object(l["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return hr={},e.next=3,J.obtener();case 3:r=e.sent,r.forEach((function(e){hr[e._id]=e.nombre}));case 5:case"end":return e.stop()}}),e)})))()},obtenerReporte:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function r(){var t,a,n,o,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,N.obtenerPorTipoUnidad(D.TIPO_ROJO);case 2:for(t=r.sent,t.reverse(),t.forEach((function(r){r.nombreRuta=e.obtenerNombreRutaSegunId(r.idRuta)})),a=t.length-2;a>=0;a--)n=t[a].hora,o=t[a+1].hora,i=A.restarHorarios(n,o),t[a].tiempoGeneral=i;e.horarios=t;case 7:case"end":return r.stop()}}),r)})))()}}},gr=br,_r=Object(p["a"])(gr,vr,pr,!1,null,null,null),Rr=_r.exports;b()(_r,{VBtn:g["a"],VCard:_["a"],VCol:Oe["a"],VDivider:K["a"],VIcon:Q["a"],VListItem:X["a"],VListItemContent:ee["a"],VListItemTitle:ee["b"],VRow:we["a"]});var xr={name:"HelloWorld",components:{Comisiones:fr,AcercaDe:We,Reportes:Ae,Horarios:ke,Rutas:ae,ReportePorUnidad:Ne,RutaFija:Le,Rojos:Rr},data:function(){return{tab:0}},methods:{actualizarReporte:function(){this.$refs.reportes.refrescarTodo()},actualizarRutasEnHorarios:function(){this.$refs.horarios.obtenerRutas()}}},Or=xr,wr=t("71a3"),Sr=t("c671"),kr=t("fe57"),Cr=t("aac8"),Ir=t("9a96"),Vr=Object(p["a"])(Or,i,s,!1,null,null,null),jr=Vr.exports;b()(Vr,{VIcon:Q["a"],VTab:wr["a"],VTabItem:Sr["a"],VTabs:kr["a"],VTabsItems:Cr["a"],VTabsSlider:Ir["a"]});var Tr={name:"App",components:{Principal:jr},data:function(){return{}}},yr=Tr,Ar=(t("cf25"),t("7496")),Er=t("f6c4"),Hr=Object(p["a"])(yr,n,o,!1,null,null,null),Pr=Hr.exports;b()(Hr,{VApp:Ar["a"],VMain:Er["a"]});t("5363");var Dr=t("f309");a["a"].use(Dr["a"]);var $r=new Dr["a"]({icons:{iconfont:"mdi"}});a["a"].config.productionTip=!1,a["a"].filter("milisegundosALegible",(function(e){if(!e)return"-";var r=new Date(e).toISOString().substr(11,8),t=parseInt(r.substring(0,2)),a=parseInt(r.substring(3,5)),n=parseInt(r.substring(6,8)),o="";return t&&(o=o.concat("".concat(t," hr").concat(t>1?"s":""," "))),a&&(o=o.concat("".concat(a," min").concat(a>1?"s":""," "))),n&&(o=o.concat("".concat(n," seg").concat(n>1?"s":""," "))),o})),a["a"].filter("milisegundosCortos",(function(e){if(!e)return"-";var r=new Date(e).toISOString().substr(14,5);return r})),a["a"].filter("milisegundosConHoras",(function(e){if(!e)return"-";var r=new Date(e).toISOString().substr(11,8);return r})),new a["a"]({vuetify:$r,render:function(e){return e(Pr)}}).$mount("#app")},"742b":function(e,r,t){"use strict";t("8a84")},"8a84":function(e,r,t){},cf25:function(e,r,t){"use strict";t("fea6")},fea6:function(e,r,t){}});
//# sourceMappingURL=app.0eee77a4.js.map